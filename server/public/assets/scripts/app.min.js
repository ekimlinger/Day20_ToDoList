/*! to-do-app 2016-03-20 */
function submitTask(a){a.preventDefault();var b={};$.each($("#task-submit-form").serializeArray(),function(a,c){b[c.name]=c.value}),$.ajax({type:"POST",url:"/task",data:b,success:function(a){console.log(a[0]),getAllTasks()}})}function getAllTasks(){$.ajax({type:"GET",url:"/task",success:function(a){displayAllTasks(a)}})}function displayAllTasks(a){var b,c=[];$(".list").empty();for(var d=0;d<a.length;d++)b=a[d],b.task_complete?c.push(b):appendTasks(b);c.forEach(appendTasks)}function appendTasks(a){$(".list").append('<div class="task"></div>');var b=$(".list").children().last();b.data("id",a.id),b.append("<h2>Task: "+a.task_name+'<span class="task-buttons"><button class="delete btn">Delete</button></span></h2>'),b.append("<p>Description: "+a.task_description+"</p>"),a.task_complete?b.addClass("completed"):b.children().first().children().prepend('<button class="complete btn">Completed</button>')}function deleteTask(){var a={},b=$(this).parent().parent().parent();a.deleteId=b.data("id"),confirm("Are you sure you sure you would like to delete this task?")&&$.ajax({type:"DELETE",url:"/task",data:a,success:function(a){b.slideUp(500,function(){b.remove()})}})}function completeTask(){var a={},b=$(this).parent().parent().parent();a.completeId=b.data("id"),$.ajax({type:"PUT",url:"/task",data:a,success:function(){b.fadeOut(500,function(){b.addClass("completed")}).fadeIn(500)}})}$(document).ready(function(){$("#task-submit-form").on("submit",submitTask),$(".list").on("click",".delete",deleteTask),$(".list").on("click",".complete",completeTask),getAllTasks()});